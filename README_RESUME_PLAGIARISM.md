# ì´ë ¥ì„œ í‘œì ˆ ê²€ì‚¬ ì‹œìŠ¤í…œ

OpenAIì˜ `text-embedding-3-small` ëª¨ë¸ê³¼ ChromaDBë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë ¥ì„œ í‘œì ˆì„ ê²€ì‚¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- **ì´ë ¥ì„œ ì„ë² ë”©**: OpenAI text-embedding-3-small ëª¨ë¸ë¡œ ì´ë ¥ì„œ ë‚´ìš©ì„ ë²¡í„°í™”
- **ë²¡í„° ì €ì¥**: ChromaDBì— ì„ë² ë”© ë²¡í„°ì™€ ë©”íƒ€ë°ì´í„° ì €ì¥
- **ìœ ì‚¬ë„ ê²€ìƒ‰**: ìƒˆë¡œìš´ ì´ë ¥ì„œì™€ ê¸°ì¡´ ì´ë ¥ì„œë“¤ì˜ ìœ ì‚¬ë„ ë¹„êµ
- **í‘œì ˆ ê²€ì‚¬**: ìœ ì‚¬ë„ ì„ê³„ê°’(ê¸°ë³¸ 0.9) ì´ìƒì¼ ë•Œ í‘œì ˆ ì˜ì‹¬ í‘œì‹œ
- **ì¼ê´„ ì²˜ë¦¬**: ê¸°ì¡´ ì´ë ¥ì„œë“¤ì˜ ì¼ê´„ ì„ë² ë”© ì§€ì›

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Resume DB     â”‚    â”‚  OpenAI API     â”‚    â”‚   ChromaDB      â”‚
â”‚   (MySQL)       â”‚    â”‚  (Embedding)    â”‚    â”‚   (Vector DB)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Resume Plagiarism Service                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OpenAIEmbedder  â”‚  â”‚ ChromaDBManager â”‚  â”‚ Plagiarism      â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚ Detection       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Endpoints                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ /check-plagiarismâ”‚  â”‚ /embed-resume   â”‚  â”‚ /batch-embed    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ì„¤ì¹˜ ë° ì„¤ì •

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì— OpenAI API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```env
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. ChromaDB ë””ë ‰í† ë¦¬ ìƒì„±

```bash
mkdir -p ./chroma_db
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸

```bash
cd backend/app/scripts
python test_resume_plagiarism.py
```

### 2. ê¸°ì¡´ ì´ë ¥ì„œ ì„ë² ë”© ì´ˆê¸°í™”

```bash
# ëª¨ë“  ì´ë ¥ì„œ ì„ë² ë”©
python initialize_resume_embeddings.py --force

# ë°°ì¹˜ í¬ê¸° ì§€ì •
python initialize_resume_embeddings.py --batch-size 20 --force

# ê¸°ì¡´ ì„ë² ë”© ì‚­ì œ
python initialize_resume_embeddings.py --clear --force
```

### 3. API ì‚¬ìš© ì˜ˆì‹œ

#### í‘œì ˆ ê²€ì‚¬

```python
import requests

# ìƒˆë¡œìš´ ì´ë ¥ì„œ ë‚´ìš©ìœ¼ë¡œ í‘œì ˆ ê²€ì‚¬
response = requests.post("http://localhost:8000/api/v1/resume-plagiarism/check-plagiarism", json={
    "resume_content": "ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìì…ë‹ˆë‹¤...",
    "resume_id": 101,
    "similarity_threshold": 0.9
})

result = response.json()
print(result)
```

#### íŠ¹ì • ì´ë ¥ì„œ í‘œì ˆ ê²€ì‚¬

```python
# ë°ì´í„°ë² ì´ìŠ¤ì˜ ì´ë ¥ì„œ IDë¡œ í‘œì ˆ ê²€ì‚¬
response = requests.post("http://localhost:8000/api/v1/resume-plagiarism/check-resume/101?similarity_threshold=0.9")
result = response.json()
print(result)
```

#### ì´ë ¥ì„œ ì„ë² ë”©

```python
# íŠ¹ì • ì´ë ¥ì„œ ì„ë² ë”©
response = requests.post("http://localhost:8000/api/v1/resume-plagiarism/embed-resume/101")
print(response.json())

# ì¼ê´„ ì„ë² ë”©
response = requests.post("http://localhost:8000/api/v1/resume-plagiarism/batch-embed", json={
    "resume_ids": [101, 102, 103]
})
print(response.json())
```

## ğŸ“‹ API ì—”ë“œí¬ì¸íŠ¸

### í‘œì ˆ ê²€ì‚¬

- `POST /api/v1/resume-plagiarism/check-plagiarism`
  - ìƒˆë¡œìš´ ì´ë ¥ì„œ ë‚´ìš©ìœ¼ë¡œ í‘œì ˆ ê²€ì‚¬
  - ìš”ì²­: `{"resume_content": "...", "resume_id": 101, "similarity_threshold": 0.9}`

- `POST /api/v1/resume-plagiarism/check-resume/{resume_id}`
  - ë°ì´í„°ë² ì´ìŠ¤ì˜ íŠ¹ì • ì´ë ¥ì„œë¡œ í‘œì ˆ ê²€ì‚¬
  - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°: `similarity_threshold=0.9`

### ì„ë² ë”© ê´€ë¦¬

- `POST /api/v1/resume-plagiarism/embed-resume/{resume_id}`
  - íŠ¹ì • ì´ë ¥ì„œ ì„ë² ë”©

- `POST /api/v1/resume-plagiarism/batch-embed`
  - ì—¬ëŸ¬ ì´ë ¥ì„œ ì¼ê´„ ì„ë² ë”©
  - ìš”ì²­: `{"resume_ids": [101, 102, 103]}`

### ê´€ë¦¬ ê¸°ëŠ¥

- `GET /api/v1/resume-plagiarism/collection-stats`
  - ChromaDB ì»¬ë ‰ì…˜ í†µê³„ ì¡°íšŒ

- `DELETE /api/v1/resume-plagiarism/delete-embedding/{resume_id}`
  - íŠ¹ì • ì´ë ¥ì„œ ì„ë² ë”© ì‚­ì œ

- `DELETE /api/v1/resume-plagiarism/clear-all-embeddings`
  - ëª¨ë“  ì„ë² ë”© ì‚­ì œ

- `GET /api/v1/resume-plagiarism/health`
  - ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

## ğŸ“Š ì‘ë‹µ ì˜ˆì‹œ

### í‘œì ˆ ê²€ì‚¬ ê²°ê³¼

```json
{
    "input_resume_id": 101,
    "most_similar_resume": {
        "resume_id": 87,
        "user_id": 13,
        "title": "ì§€ì› ë™ê¸°",
        "similarity": 0.91
    },
    "plagiarism_suspected": true,
    "similarity_threshold": 0.9,
    "all_similar_resumes": [
        {
            "resume_id": 87,
            "user_id": 13,
            "title": "ì§€ì› ë™ê¸°",
            "similarity": 0.91
        },
        {
            "resume_id": 92,
            "user_id": 15,
            "title": "ìê¸°ì†Œê°œì„œ",
            "similarity": 0.85
        }
    ]
}
```

### ì¼ê´„ ì„ë² ë”© ê²°ê³¼

```json
{
    "success": 8,
    "failed": 2,
    "total": 10
}
```

### ì»¬ë ‰ì…˜ í†µê³„

```json
{
    "collection_name": "resumes",
    "total_resumes": 150,
    "persist_directory": "./chroma_db"
}
```

## ğŸ”§ ì„¤ì • ì˜µì…˜

### ìœ ì‚¬ë„ ì„ê³„ê°’

- **0.9 (ê¸°ë³¸ê°’)**: ë†’ì€ ì •í™•ë„, ë‚®ì€ ì˜¤íƒ
- **0.8**: ì¤‘ê°„ ì •í™•ë„, ì¤‘ê°„ ì˜¤íƒ
- **0.7**: ë‚®ì€ ì •í™•ë„, ë†’ì€ ì˜¤íƒ

### ë°°ì¹˜ í¬ê¸°

- **10 (ê¸°ë³¸ê°’)**: ì•ˆì •ì ì¸ ì²˜ë¦¬
- **20-50**: ë¹ ë¥¸ ì²˜ë¦¬ (ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€)
- **5**: ë©”ëª¨ë¦¬ ì ˆì•½ (ì²˜ë¦¬ ì‹œê°„ ì¦ê°€)

## ğŸ› ï¸ ê°œë°œì ê°€ì´ë“œ

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€

1. **ì„œë¹„ìŠ¤ ë ˆì´ì–´**: `backend/app/services/resume_plagiarism_service.py`
2. **API ì—”ë“œí¬ì¸íŠ¸**: `backend/app/api/v1/resume_plagiarism.py`
3. **ìœ í‹¸ë¦¬í‹°**: `backend/app/utils/` ë””ë ‰í† ë¦¬

### ë¡œê¹…

ì‹œìŠ¤í…œì€ ìƒì„¸í•œ ë¡œê¹…ì„ ì œê³µí•©ë‹ˆë‹¤:

```python
import logging
logging.basicConfig(level=logging.INFO)
```

### ì—ëŸ¬ ì²˜ë¦¬

ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ëŠ” ì ì ˆí•œ HTTP ìƒíƒœ ì½”ë“œì™€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤:

- `400`: ì˜ëª»ëœ ìš”ì²­
- `404`: ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
- `500`: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```bash
cd backend/app/scripts
python test_resume_plagiarism.py
```

### í†µí•© í…ŒìŠ¤íŠ¸

```bash
# ì„œë²„ ì‹œì‘
cd backend
uvicorn app.main:app --reload

# API í…ŒìŠ¤íŠ¸
curl -X POST "http://localhost:8000/api/v1/resume-plagiarism/health"
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ì„ë² ë”© ìºì‹±

- OpenAI API í˜¸ì¶œ ìµœì†Œí™”ë¥¼ ìœ„í•œ ìºì‹± êµ¬í˜„
- ë™ì¼í•œ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ì¤‘ë³µ ì„ë² ë”© ë°©ì§€

### ë°°ì¹˜ ì²˜ë¦¬

- ëŒ€ëŸ‰ì˜ ì´ë ¥ì„œ ì²˜ë¦¬ ì‹œ ë°°ì¹˜ ë‹¨ìœ„ë¡œ ì²˜ë¦¬
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ê³¼ ì²˜ë¦¬ ì†ë„ ìµœì í™”

### ë²¡í„° ì¸ë±ì‹±

- ChromaDBì˜ ìë™ ì¸ë±ì‹± í™œìš©
- ë¹ ë¥¸ ìœ ì‚¬ë„ ê²€ìƒ‰ ì§€ì›

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **API í‚¤ ë³´ì•ˆ**: OpenAI API í‚¤ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
2. **ë°ì´í„° ì•”í˜¸í™”**: ChromaDB ë°ì´í„°ëŠ” ë¡œì»¬ ì €ì¥
3. **ì ‘ê·¼ ì œì–´**: API ì—”ë“œí¬ì¸íŠ¸ì— ì ì ˆí•œ ì¸ì¦/ì¸ê°€ ì ìš© í•„ìš”

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **OpenAI API í‚¤ ì˜¤ë¥˜**
   - í™˜ê²½ë³€ìˆ˜ `OPENAI_API_KEY` í™•ì¸
   - API í‚¤ ìœ íš¨ì„± ê²€ì¦

2. **ChromaDB ì—°ê²° ì˜¤ë¥˜**
   - ë””ë ‰í† ë¦¬ ê¶Œí•œ í™•ì¸
   - ë””ìŠ¤í¬ ê³µê°„ í™•ì¸

3. **ë©”ëª¨ë¦¬ ë¶€ì¡±**
   - ë°°ì¹˜ í¬ê¸° ì¤„ì´ê¸°
   - ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ í™•ì¸

### ë¡œê·¸ í™•ì¸

```bash
# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
tail -f logs/app.log

# ChromaDB ë¡œê·¸
tail -f logs/chromadb.log
```

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. ë¡œê·¸ íŒŒì¼ í™•ì¸
2. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€
3. í™˜ê²½ë³€ìˆ˜ ì„¤ì • í™•ì¸
4. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸

---

**ë²„ì „**: 1.0.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024ë…„ 12ì›”  
**ë¼ì´ì„ ìŠ¤**: MIT 