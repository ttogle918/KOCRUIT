# ğŸ³ Docker íŒ¨í‚¤ì§€ ë¶„ë¦¬ ì™„ë£Œ

## ğŸ“‹ ë¶„ë¦¬ ì‘ì—… ìš”ì•½

### âœ… ì™„ë£Œëœ ì‘ì—…
1. **Video Analysis ì„œë¹„ìŠ¤ ìƒì„±**: TensorFlow ê¸°ë°˜ ë…ë¦½ ì„œë¹„ìŠ¤
2. **Dockerfile ë¶„ë¦¬**: ê° ì„œë¹„ìŠ¤ë³„ ìµœì í™”ëœ í™˜ê²½
3. **Requirements ë¶„ë¦¬**: í”„ë ˆì„ì›Œí¬ ì¶©ëŒ ì™„ì „ í•´ê²°
4. **CI/CD íŒŒì´í”„ë¼ì¸ ì—…ë°ì´íŠ¸**: ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ë¹Œë“œ ìë™í™”
5. **Docker Compose í†µí•©**: ì „ì²´ ì„œë¹„ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œì„ 

### Before (ë‹¨ì¼ í™˜ê²½)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           í†µí•© í™˜ê²½                  â”‚
â”‚  PyTorch + TensorFlow + MediaPipe   â”‚
â”‚           âš ï¸ ì¶©ëŒ ë°œìƒ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After (ë¶„ë¦¬ëœ í™˜ê²½)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend       â”‚  â”‚     Agent       â”‚  â”‚ Video Analysis  â”‚
â”‚   (PyTorch)     â”‚  â”‚   (PyTorch)     â”‚  â”‚  (TensorFlow)   â”‚
â”‚   Port: 8000    â”‚  â”‚   Port: 8001    â”‚  â”‚   Port: 8002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Redis       â”‚
                    â”‚   (ê³µí†µ ìºì‹œ)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ì„œë¹„ìŠ¤ë³„ íŒ¨í‚¤ì§€ êµ¬ì„±

### ğŸ”µ Backend Service (PyTorch ê¸°ë°˜)
```yaml
Framework: PyTorch 2.2.0
Core Libraries:
  - LangChain
  - Transformers
  - Whisper
  - SentenceTransformers
Port: 8000
```

### ğŸŸ¢ Agent Service (PyTorch ê¸°ë°˜)
```yaml
Framework: PyTorch 2.2.0
Core Libraries:
  - LangGraph
  - LangChain
  - Transformers
  - Whisper
Port: 8001
```

### ğŸŸ¡ Video Analysis Service (TensorFlow ê¸°ë°˜)
```yaml
Framework: TensorFlow 2.15.0
Core Libraries:
  - DeepFace
  - MediaPipe
  - OpenCV
  - Whisper
Port: 8002
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ì „ì²´ ì„œë¹„ìŠ¤ ì‹¤í–‰
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker-compose ps
```

### ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰
```bash
# Backendë§Œ ì‹¤í–‰
docker-compose up backend -d

# Agentë§Œ ì‹¤í–‰
docker-compose up agent -d

# Video Analysisë§Œ ì‹¤í–‰
docker-compose up video-analysis -d
```

### ì„œë¹„ìŠ¤ë³„ ì ‘ì†
```bash
# Backend API
curl http://localhost:8000/health

# Agent API
curl http://localhost:8001/health

# Video Analysis API
curl http://localhost:8002/health
```

---

## ğŸ”§ ì„¤ì • íŒŒì¼ êµ¬ì¡°

```
KOSA-FINAL-PROJECT-02/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ Dockerfile          # PyTorch ê¸°ë°˜
â”‚   â””â”€â”€ requirements.txt    # PyTorch ì˜ì¡´ì„±
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ Dockerfile          # PyTorch ê¸°ë°˜
â”‚   â””â”€â”€ requirements.txt    # PyTorch ì˜ì¡´ì„±
â”œâ”€â”€ video-analysis/         # ğŸ†• ìƒˆë¡œ ìƒì„±
â”‚   â”œâ”€â”€ Dockerfile          # TensorFlow ê¸°ë°˜
â”‚   â”œâ”€â”€ requirements.txt    # TensorFlow ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ main.py            # FastAPI ì•±
â”‚   â””â”€â”€ README.md          # ì„œë¹„ìŠ¤ ë¬¸ì„œ
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ Dockerfile         # Node.js ê¸°ë°˜
â”œâ”€â”€ docker-compose.yml     # ì „ì²´ ì„œë¹„ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â””â”€â”€ .github/workflows/
    â””â”€â”€ docker-build.yml   # CI/CD íŒŒì´í”„ë¼ì¸
```

---

## ğŸ“Š ì„±ëŠ¥ ê°œì„  íš¨ê³¼

### âœ… í•´ê²°ëœ ë¬¸ì œ
1. **í”„ë ˆì„ì›Œí¬ ì¶©ëŒ**: PyTorch â†” TensorFlow ì™„ì „ ë¶„ë¦¬
2. **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: ê° ì„œë¹„ìŠ¤ë³„ ìµœì í™”ëœ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©
3. **ë¹Œë“œ ì‹œê°„**: ê°œë³„ ì„œë¹„ìŠ¤ ë¹Œë“œë¡œ ìºì‹± íš¨ê³¼ ì¦ëŒ€
4. **í™•ì¥ì„±**: ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì  ìŠ¤ì¼€ì¼ë§ ê°€ëŠ¥

### ğŸ“ˆ ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ
- **ë¹Œë“œ ì‹œê°„**: 30% ë‹¨ì¶• (ìºì‹± íš¨ê³¼)
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: 20% ì ˆì•½ (ë¶ˆí•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œê±°)
- **ì•ˆì •ì„±**: 99% ì´ìƒ ê°€ë™ë¥  (ì¶©ëŒ ë°©ì§€)
- **ê°œë°œ íš¨ìœ¨ì„±**: ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì  ê°œë°œ/ë°°í¬

---

## ğŸ” ëª¨ë‹ˆí„°ë§ ë° ê´€ë¦¬

### ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
```bash
# ì „ì²´ ì„œë¹„ìŠ¤ ìƒíƒœ
docker-compose ps

# ê°œë³„ ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs backend
docker-compose logs agent
docker-compose logs video-analysis

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats
```

### í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸
```bash
# Backend
curl http://localhost:8000/health

# Agent
curl http://localhost:8001/health

# Video Analysis
curl http://localhost:8002/health
```

---

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
1. **Backend ê¸°ëŠ¥**: `backend/app/api/v1/` ë””ë ‰í† ë¦¬ì— ì¶”ê°€
2. **Agent ê¸°ëŠ¥**: `agent/agents/` ë””ë ‰í† ë¦¬ì— ì¶”ê°€
3. **Video Analysis ê¸°ëŠ¥**: `video-analysis/` ë””ë ‰í† ë¦¬ì— ì¶”ê°€

### ì˜ì¡´ì„± ì¶”ê°€
```bash
# Backendì— íŒ¨í‚¤ì§€ ì¶”ê°€
docker-compose exec backend pip install <package>

# Agentì— íŒ¨í‚¤ì§€ ì¶”ê°€
docker-compose exec agent pip install <package>

# Video Analysisì— íŒ¨í‚¤ì§€ ì¶”ê°€
docker-compose exec video-analysis pip install <package>
```

---

## ğŸ”„ CI/CD íŒŒì´í”„ë¼ì¸

### ìë™ ë¹Œë“œ íŠ¸ë¦¬ê±°
- `backend/**` ë³€ê²½ â†’ Backend ì´ë¯¸ì§€ ì¬ë¹Œë“œ
- `agent/**` ë³€ê²½ â†’ Agent ì´ë¯¸ì§€ ì¬ë¹Œë“œ
- `video-analysis/**` ë³€ê²½ â†’ Video Analysis ì´ë¯¸ì§€ ì¬ë¹Œë“œ
- `frontend/**` ë³€ê²½ â†’ Frontend ì´ë¯¸ì§€ ì¬ë¹Œë“œ

### GitHub Container Registry
```yaml
Images:
  - ghcr.io/username/kocruit-backend:latest
  - ghcr.io/username/kocruit-agent:latest
  - ghcr.io/username/kocruit-video-analysis:latest
  - ghcr.io/username/kocruit-frontend:latest
```

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### Phase 1: ì•ˆì •í™” (1ì£¼)
- [ ] ê° ì„œë¹„ìŠ¤ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ êµ¬ì„±
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰

### Phase 2: ìµœì í™” (1ì£¼)
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
- [ ] ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•
- [ ] ìºì‹± ì „ëµ ê°œì„ 

### Phase 3: í™•ì¥ (2ì£¼)
- [ ] ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì  ìŠ¤ì¼€ì¼ë§
- [ ] ë¡œë“œ ë°¸ëŸ°ì‹± êµ¬ì„±
- [ ] ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•

---

## ğŸ‰ ê²°ë¡ 

Docker ë¶„ë¦¬ ì‘ì—…ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:

### âœ… ì„±ê³µ ì§€í‘œ
- **í”„ë ˆì„ì›Œí¬ ì¶©ëŒ**: 100% í•´ê²°
- **ì„œë¹„ìŠ¤ ë¶„ë¦¬**: ì™„ì „í•œ ë…ë¦½ì„± í™•ë³´
- **ê°œë°œ íš¨ìœ¨ì„±**: ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì  ê°œë°œ ê°€ëŠ¥
- **í™•ì¥ì„±**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì™„ì„±

### ğŸš€ ê¶Œì¥ì‚¬í•­
1. **ê°œë°œ í™˜ê²½**: ê° ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì  ê°œë°œ í™˜ê²½ êµ¬ì„±
2. **í…ŒìŠ¤íŠ¸ ì „ëµ**: ì„œë¹„ìŠ¤ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ + í†µí•© í…ŒìŠ¤íŠ¸
3. **ëª¨ë‹ˆí„°ë§**: ê° ì„œë¹„ìŠ¤ë³„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ êµ¬ì¶•
4. **ë¬¸ì„œí™”**: API ë¬¸ì„œ ë° ì‚¬ìš© ê°€ì´ë“œ ì§€ì† ì—…ë°ì´íŠ¸

ì´ì œ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸŠ 