# ì‹¤ì‹œê°„ ë©´ì ‘ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ê°œìš”

ì‹¤ì‹œê°„ ë©´ì ‘ ì‹œìŠ¤í…œì€ WebSocketì„ í†µí•œ ì‹¤ì‹œê°„ í†µì‹ ê³¼ AI ê¸°ë°˜ ìŒì„± ì¸ì‹, í™”ì ë¶„ë¦¬, í‰ê°€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- **ì‹¤ì‹œê°„ WebSocket í†µì‹ **: ë©´ì ‘ ì„¸ì…˜ ì¤‘ ì‹¤ì‹œê°„ ë°ì´í„° ì „ì†¡
- **ìŒì„± ì¸ì‹**: í•œêµ­ì–´ ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
- **í™”ì ë¶„ë¦¬**: 6ëª…ì˜ ì°¸ê°€ì(ë©´ì ‘ê´€ 3ëª…, ì§€ì›ì 3ëª…) êµ¬ë¶„
- **AI í‰ê°€**: ì‹¤ì‹œê°„ ë©´ì ‘ ë‚´ìš© ë¶„ì„ ë° ì ìˆ˜ ì œê³µ
- **í™”ìë³„ ë©”ëª¨**: ë©´ì ‘ê´€ì´ ì§€ì›ìì— ëŒ€í•œ ë©”ëª¨ ì‘ì„±

## í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

### 1. Docker ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸

```bash
# ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
docker ps

# ì˜ˆìƒ ê²°ê³¼:
# kocruit_fastapi    - FastAPI ì„œë²„ (í¬íŠ¸ 8000)
# kocruit_agent      - AI Agent ì„œë²„ (í¬íŠ¸ 8001)
# kocruit_react      - React í”„ë¡ íŠ¸ì—”ë“œ (í¬íŠ¸ 5173)
# kosa-redis         - Redis ìºì‹œ (í¬íŠ¸ 6379)
```

### 2. ì˜ì¡´ì„± í™•ì¸

```bash
# FastAPI ì„œë²„ì— websockets ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ í™•ì¸
docker exec -it kocruit_fastapi pip list | grep websockets

# ì„¤ì¹˜ë˜ì§€ ì•Šì€ ê²½ìš°
docker exec -it kocruit_fastapi pip install websockets
docker restart kocruit_fastapi
```

## í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### 1. í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬

```bash
# agent í´ë”ì—ì„œ ì‹¤í–‰
docker cp agent/test_realtime_interview.py kocruit_agent:/app/
```

### 2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# Agent ì»¨í…Œì´ë„ˆì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
docker exec -it kocruit_agent python test_realtime_interview.py
```

### 3. ì˜ˆìƒ ê²°ê³¼

```
ğŸš€ ì‹¤ì‹œê°„ ë©´ì ‘ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹œì‘
==================================================
ğŸ”„ WebSocket ì—°ê²° ì‹œë„: ws://kocruit_fastapi:8000/api/v1/realtime-interview/ws/interview/test_session_xxx
âœ… WebSocket ì—°ê²° ì„±ê³µ!

ğŸ“ í™”ì ë©”ëª¨ í…ŒìŠ¤íŠ¸...
ğŸ“¨ ë©”ëª¨ ì‘ë‹µ: {"type": "note_saved", "speaker": "ë©´ì ‘ê´€_1", "note": "ì§€ì›ìì˜ ê¸°ìˆ ì  ë°°ê²½ì´ ì¸ìƒì ì…ë‹ˆë‹¤.", ...}

â­ í‰ê°€ ìš”ì²­ í…ŒìŠ¤íŠ¸...
ğŸ“¨ í‰ê°€ ì‘ë‹µ: {"type": "evaluation_summary", "summary": {...}}

ğŸ¤ ê°€ì§œ ì˜¤ë””ì˜¤ ì²­í¬ í…ŒìŠ¤íŠ¸...
ğŸ“¨ ì˜¤ë””ì˜¤ ì²˜ë¦¬ ì‘ë‹µ: {"type": "audio_processed", "result": {...}}

ğŸ”š ì„¸ì…˜ ì¢…ë£Œ í…ŒìŠ¤íŠ¸...
ğŸ“¨ ì„¸ì…˜ ì¢…ë£Œ ì‘ë‹µ: {"type": "session_ended", "final_result": {...}}

âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ!

ğŸ”„ ì„¸ì…˜ ìƒíƒœ ì¡°íšŒ í…ŒìŠ¤íŠ¸: http://kocruit_fastapi:8000/api/v1/realtime-interview/interview/session/xxx/status
âœ… ì˜ˆìƒëœ 404 ì‘ë‹µ (ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì„¸ì…˜)

==================================================
ğŸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!
```

## í…ŒìŠ¤íŠ¸ í•­ëª© ìƒì„¸ ì„¤ëª…

### 1. WebSocket ì—°ê²° í…ŒìŠ¤íŠ¸
- **ëª©ì **: ì‹¤ì‹œê°„ í†µì‹  ì±„ë„ ì—°ê²° í™•ì¸
- **ê¸°ëŒ€ ê²°ê³¼**: ì—°ê²° ì„±ê³µ ë©”ì‹œì§€
- **ì‹¤íŒ¨ ì‹œ**: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë° ì„œë²„ ìƒíƒœ í™•ì¸

### 2. í™”ì ë©”ëª¨ í…ŒìŠ¤íŠ¸
- **ëª©ì **: ë©´ì ‘ê´€ì´ ì§€ì›ìì— ëŒ€í•œ ë©”ëª¨ ì‘ì„± ê¸°ëŠ¥
- **í…ŒìŠ¤íŠ¸ ë°ì´í„°**: "ì§€ì›ìì˜ ê¸°ìˆ ì  ë°°ê²½ì´ ì¸ìƒì ì…ë‹ˆë‹¤."
- **ê¸°ëŒ€ ê²°ê³¼**: ë©”ëª¨ ì €ì¥ í™•ì¸ ì‘ë‹µ

### 3. í‰ê°€ ìš”ì²­ í…ŒìŠ¤íŠ¸
- **ëª©ì **: AIê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë©´ì ‘ ë‚´ìš©ì„ í‰ê°€í•˜ëŠ” ê¸°ëŠ¥
- **ê¸°ëŒ€ ê²°ê³¼**: ì„¸ì…˜ ìš”ì•½ ì •ë³´ (í†µê³„, ì ìˆ˜ ë“±)

### 4. ì˜¤ë””ì˜¤ ì²­í¬ í…ŒìŠ¤íŠ¸
- **ëª©ì **: ì‹¤ì‹œê°„ ìŒì„± ë°ì´í„° ì²˜ë¦¬ ê¸°ëŠ¥
- **ì²˜ë¦¬ ê³¼ì •**: 
  1. ìŒì„± ì¸ì‹ (í•œêµ­ì–´ â†’ í…ìŠ¤íŠ¸)
  2. í™”ì ë¶„ë¦¬ (6ëª… ì¤‘ 1ëª… ì‹ë³„)
  3. AI í‰ê°€ (í‚¤ì›Œë“œ ë¶„ì„, ì ìˆ˜ ê³„ì‚°)
- **ê¸°ëŒ€ ê²°ê³¼**: ì²˜ë¦¬ëœ ì˜¤ë””ì˜¤ ë°ì´í„°ì™€ í‰ê°€ ê²°ê³¼

### 5. ì„¸ì…˜ ì¢…ë£Œ í…ŒìŠ¤íŠ¸
- **ëª©ì **: ë©´ì ‘ ì„¸ì…˜ ì •ë¦¬ ë° ê²°ê³¼ ì €ì¥
- **ê¸°ëŒ€ ê²°ê³¼**: ì „ì²´ ì„¸ì…˜ ìš”ì•½ (íŠ¸ëœìŠ¤í¬ë¦½íŠ¸, í‰ê°€, ë©”ëª¨)

### 6. ì„¸ì…˜ ìƒíƒœ ì¡°íšŒ í…ŒìŠ¤íŠ¸
- **ëª©ì **: HTTP APIë¥¼ í†µí•œ ì„¸ì…˜ ì •ë³´ ì¡°íšŒ
- **ê¸°ëŒ€ ê²°ê³¼**: 404 ì‘ë‹µ (í…ŒìŠ¤íŠ¸ ì„¸ì…˜ì€ ì„ì‹œì´ë¯€ë¡œ)

## ë¬¸ì œ í•´ê²°

### WebSocket ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ**: `server rejected WebSocket connection: HTTP 404`
```bash
# í•´ê²° ë°©ë²•
docker exec -it kocruit_fastapi pip install websockets
docker restart kocruit_fastapi
```

**ì¦ìƒ**: `server rejected WebSocket connection: HTTP 403`
```bash
# í•´ê²° ë°©ë²•
# 1. WebSocket ê²½ë¡œ í™•ì¸
# 2. FastAPI ë¼ìš°í„° ë“±ë¡ í™•ì¸
docker logs kocruit_fastapi --tail=20
```

### ì»¨í…Œì´ë„ˆ ê°„ í†µì‹  ì˜¤ë¥˜

**ì¦ìƒ**: `Connect call failed`
```bash
# í•´ê²° ë°©ë²•
# 1. ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
docker ps

# 2. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
docker network ls
docker network inspect kosa-final-project-02_app-net
```

### ì˜ì¡´ì„± ì˜¤ë¥˜

**ì¦ìƒ**: `ModuleNotFoundError`
```bash
# í•´ê²° ë°©ë²•
# 1. requirements.txt í™•ì¸
docker exec -it kocruit_agent pip list

# 2. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
docker exec -it kocruit_agent pip install missing_package
```

## ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### 1. ë©´ì ‘ íŒ¨ë„ í˜ì´ì§€ ì ‘ì†
- í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5173
- ë©´ì ‘ íŒ¨ë„ í˜ì´ì§€ë¡œ ì´ë™

### 2. WebSocket ì—°ê²°
- ë¸Œë¼ìš°ì €ì—ì„œ ìë™ìœ¼ë¡œ WebSocket ì—°ê²°
- ì‹¤ì‹œê°„ í†µì‹  ì¤€ë¹„ ì™„ë£Œ

### 3. ì˜¤ë””ì˜¤ ë…¹ìŒ ì‹œì‘
- ë§ˆì´í¬ ê¶Œí•œ í—ˆìš©
- ì‹¤ì‹œê°„ ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° ì‹œì‘

### 4. AI í‰ê°€ ëª¨ë‹ˆí„°ë§
- ì‹¤ì‹œê°„ ìŒì„± ì¸ì‹ ê²°ê³¼ í™•ì¸
- í™”ìë³„ ë°œí™” ë‚´ìš© í™•ì¸
- AI í‰ê°€ ì ìˆ˜ ë° í”¼ë“œë°± í™•ì¸

### 5. ë©´ì ‘ê´€ ë©”ëª¨ ì‘ì„±
- ì§€ì›ìë³„ ë©”ëª¨ ì‘ì„±
- ì‹¤ì‹œê°„ ì €ì¥ ë° ê³µìœ 

## API ì—”ë“œí¬ì¸íŠ¸

### WebSocket ì—”ë“œí¬ì¸íŠ¸
```
ws://localhost:8000/api/v1/realtime-interview/ws/interview/{session_id}
```

### HTTP ì—”ë“œí¬ì¸íŠ¸
```
GET /api/v1/realtime-interview/interview/session/{session_id}/status
```

## ê´€ë ¨ íŒŒì¼

- `test_realtime_interview.py`: í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
- `backend/app/api/v1/realtime_interview.py`: WebSocket API êµ¬í˜„
- `agent/tools/realtime_interview_evaluation_tool.py`: AI í‰ê°€ ë„êµ¬
- `agent/tools/speaker_diarization_tool.py`: í™”ì ë¶„ë¦¬ ë„êµ¬
- `frontend/src/pages/applicant/InterviewPanel.jsx`: í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„

## ì¶”ê°€ ì •ë³´

- **ì§€ì› ì–¸ì–´**: í•œêµ­ì–´
- **í™”ì ìˆ˜**: ìµœëŒ€ 6ëª… (ë©´ì ‘ê´€ 3ëª…, ì§€ì›ì 3ëª…)
- **í‰ê°€ í•­ëª©**: ê¸°ìˆ , ê²½í—˜, ì¸ì„±, ë™ê¸°
- **ì‹¤ì‹œê°„ ì²˜ë¦¬**: 30ì´ˆ ê°„ê²©ìœ¼ë¡œ AI í‰ê°€ ìˆ˜í–‰ 